apiVersion: v1
kind: ConfigMap
metadata:
  name: xapp-script
data:
  {{- $files := .Files }}

  # Including specific files in the root directory
  {{- range tuple "xapp.py" "script2.py" }}
  {{ . }}: |-
    {{ $files.Get . | trim | indent 4 }}
  {{- end }}

  # Including all files inside the lib/ directory (recursively)
  {{- $libFiles := .Files.Glob "lib/**/*" }}
  {{- range $libFiles }}
  {{- $filePath := . }}  # Store the full file path
  {{- $baseName := base $filePath }}  # Extract the base name of the file
  {{ $baseName }}: |
    {{ $files.Get $filePath | nindent 8 }}  # Access the file content with the full path
  {{- end }}
